{% extends 'usuarios/base.html'%}

{% block aba %}Visualizar Livros{%endblock%}
{% block titulo %}Visualizar Livros{%endblock%}
{% block conteudo %}
<h3>
    Visualização de Livros registradas
</h3>
<hr>

<form method="get" class="mb-4 d-flex flex-wrap gap-3 align-items-end">
    <!-- Filtro por Gênero -->
    <div>
        <label for="genero" class="fw-bold me-2">Filtrar livro por:</label>
        <select name="genero" id="genero" class="form-select w-auto" onchange="this.form.submit()">
            <option value="">Todos os Livros</option>
            {% for g in generos_unicos %}
                <option value="{{ g }}" {% if genero_selecionado == g %}selected{% endif %}>{{ g }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Ordenação -->
    <div>
        <label for="ordenar" class="fw-bold me-2">Ordenar por:</label>
        <select name="ordenar" id="ordenar" class="form-select w-auto" onchange="this.form.submit()">
            <option value="">Padrão</option>
            <option value="titulo" {% if ordenar_selecionado == 'titulo' %}selected{% endif %}>A-Z</option>
            <option value="paginas" {% if ordenar_selecionado == 'paginas' %}selected{% endif %}>Páginas</option>
        </select>
    </div>
</form>


<div class="table-responsive">
    <table class="table table-striped"> 
        <tr>
            <th>Usuário</th>
            <th>Nome do Livro</th>
            <th>Autor</th>
            <th>Gênero</th>
            <th>Editora</th>
            <th>Número de Páginas</th>       
        </tr>
        {% for campo in lista_livros %}
            <tr>
                <td>{{user.first_name}}</td>
                <td>{{campo.livro}}</td>
                <td>{{campo.nome_autor}}</td>
                <td>{{campo.nome_genero}}</td>
                <td>{{campo.nome_editora}}</td>
                <td>{{campo.num_paginas}}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6">Nenhum registro encontrado.</td>
            </tr>
        {% endfor %}
    </table>
</div>
<hr>
{%endblock%}