{% extends 'usuarios/base.html'%}

{% block aba %}Editar Livros{%endblock%}
{% block titulo %}Editar Livros Cadastrados{%endblock%}
{% block conteudo %}
<h3>Edição de Livro Selecionado</h3>
<p class="lead">Verifique as informações cadastradas e faça as devidas edições.</p>
<hr>
<div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
    <div class="card border-0 shadow rounded-3 my-5">
        <div class="card-body p-4 p-sm-5">
            <form action="{% url 'editar' lista_livros.pk %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="mb-3 text-center"> 
                    <label>Usuário:</label>
                    <label style="font-weight: bold;">{{ user.first_name }}</label>
                </div>

                <!-- Imagem atual -->
                <div class="mb-3 text-center">
                    {% if lista_livros.imagem %}
                        <img src="{{ lista_livros.imagem.url }}" class="img-fluid rounded border border-secondary" style="max-width: 100%; max-height: 300px; object-fit: contain;" alt="Imagem atual">
                    {% else %}
                        <img src="https://via.placeholder.com/250x350.png?text=Sem+Imagem"
                        class="img-fluid rounded border border-secondary"
                        alt="Sem Imagem"
                        style="max-height: 300px;">
                    {% endif %}
                </div>

                <!-- Campo para nova imagem -->
                <div class="mb-3">
                    <label for="imagem">Substituir imagem:</label>
                    <input type="file" class="form-control" name="imagem" accept="image/*">
                </div>

                <!-- Demais campos -->
                <div>
                    <label>Nome do Livro:</label>
                    <input type="text" class="form-control" name="livro" value="{{ lista_livros.livro }}">
                </div>
                <div>
                    <label>Autor:</label>
                    <input type="text" class="form-control" name="nome_autor" value="{{ lista_livros.nome_autor }}">
                </div>
                <div>
                    <label>Gênero:</label>
                    <input type="text" class="form-control" name="nome_genero" value="{{ lista_livros.nome_genero }}">
                </div>
                <div>
                    <label>Editora:</label>
                    <input type="text" class="form-control" name="nome_editora" value="{{ lista_livros.nome_editora }}">
                </div>
                <div>
                    <label>Número de Páginas:</label>
                    <input type="number" class="form-control" name="num_paginas" value="{{ lista_livros.num_paginas }}">
                </div>

                <div class="update mt-3">
                    <button type="submit" class="btn btn-success btn-sm">Atualizar</button>
                    <a href="{% url 'alterar' %}" class="btn btn-danger btn-sm">Voltar</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
